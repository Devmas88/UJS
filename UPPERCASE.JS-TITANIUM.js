global.CONNECT_TO_SOCKET_SERVER=CONNECT_TO_SOCKET_SERVER=METHOD({run:function(e,o){"use strict";var t,r,n,i,E,T,u,s,c,a=e.host,d=e.port,S={},f=0,v="";CHECK_IS_DATA(o)!==!0?t=o:(t=o.success,r=o.error),c=function(e,o,t){var r=S[e];void 0!==r&&EACH(r,function(e){e(o,function(e){void 0!==s&&void 0!==t&&s({methodName:"__CALLBACK_"+t,data:e})})})},n=Ti.Network.Socket.createTCP({host:a,port:d,connected:function(e){var o=e.socket;Ti.Stream.pump(o,function(e){if(e.bytesProcessed<0)return E!==!0&&c("__DISCONNECTED"),void n.close();if(void 0!==e.buffer&&e.buffer!==TO_DELETE){var o,t,r;for(v+=e.buffer.toString();-1!==(t=v.indexOf("\r\n"));)o=v.substring(0,t),r=PARSE_STR(o),void 0!==r&&c(r.methodName,r.data,r.sendKey),v=v.substring(t+1)}},1024,!0),i=!0,t(T=function(e,o){var t=S[e];void 0===t&&(t=S[e]=[]),t.push(o)},u=function(e,o){var t=S[e];void 0!==t&&(void 0!==o?REMOVE({array:t,value:o}):delete S[e])},s=function(e,t){var r="__CALLBACK_"+f;e.sendKey=f,f+=1;try{o.write(Ti.createBuffer({value:STRINGIFY(e)+"\r\n"}))}catch(n){c("__DISCONNECTED")}void 0!==t&&T(r,function(e){t(e),u(r)})},function(){E=!0,n.close()})},error:function(e){var o=e.error.toString();i!==!0?void 0!==r?r(o):console.log("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+o):c("__ERROR",o)}}),n.connect()}}),global.DELETE=DELETE=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"DELETE"}]),o)}}),global.GET=GET=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"GET"}]),o)}}),global.POST=POST=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"POST"}]),o)}}),global.PUT=PUT=METHOD({run:function(e,o){"use strict";REQUEST(COMBINE([e,{method:"PUT"}]),o)}}),global.REQUEST=REQUEST=METHOD({run:function(e,o){"use strict";var t,r,n,i,E=e.host,T=e.port,u=e.isSecure,s=e.method,c=e.uri,a=e.paramStr,d=e.data;s=s.toUpperCase(),void 0!==c&&-1!==c.indexOf("?")&&(a=c.substring(c.indexOf("?")+1)+(void 0===a?"":"&"+a),c=c.substring(0,c.indexOf("?"))),void 0!==d&&(a=(void 0===a?"":a+"&")+"data="+encodeURIComponent(STRINGIFY(d))),a=(void 0===a?"":a+"&")+Date.now(),CHECK_IS_DATA(o)!==!0?t=o:(t=o.success,r=o.error),n=(u===!0?"https://":"http://")+E+":"+T+"/"+(void 0===c?"":c),i=Ti.Network.createHTTPClient({onload:function(){t(this.responseText)},onerror:function(o){var t=o.error;void 0!==r?r(t):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",e,t)}}),s=s.toUpperCase(),"GET"===s?(i.open(s,n+"?"+a),i.send()):(i.open(s,n),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(a))}}),global.STORE=STORE=CLASS({init:function(e,o,t){"use strict";var r,n,i,E;e.genFullName=r=function(e){return t+"."+e},o.save=n=function(e){var o=e.name,t=e.value;Ti.App.Properties.setString(r(o),STRINGIFY(t))},o.get=i=function(e){var o=Ti.App.Properties.getString(r(e));return PARSE_STR(o===TO_DELETE?void 0:o)},o.remove=E=function(e){Ti.App.Properties.removeProperty(r(e))}}});