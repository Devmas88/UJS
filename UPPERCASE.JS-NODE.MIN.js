global.NODE_CONFIG={},global.CPU_CLUSTERING=METHOD(function(n){"use strict";var E,o,t=require("cluster");return n.getWorkerId=o=function(){return E},{run:function(o){RUN(t.isMaster?function(){var n=function(){var n=t.fork();n.on("message",function(E){EACH(t.workers,function(o){o!==n&&o.send(E)})})};REPEAT(require("os").cpus().length,function(){n()}),t.on("exit",function(E,o,t){console.log(CONSOLE_RED("[UPPERCASE.JS-CPU_CLUSTERING] WORKER #"+E.id+" died. ("+(void 0!==t?t:o)+"). restarting...")),n()})}:function(){var e,i,r,S={},c=function(n,E){var o=S[n];void 0!==o&&EACH(o,function(n){n(E)})};E=t.worker.id,process.on("message",function(n){var E=PARSE_STR(n);void 0!==E&&c(E.methodName,E.data)}),n.on=e=function(n,E){var o=S[n];void 0===o&&(o=S[n]=[]),o.push(E)},e("__SHARED_STORE_SAVE",SHARED_STORE.save),e("__SHARED_STORE_REMOVE",SHARED_STORE.remove),e("__CPU_SHARED_STORE_SAVE",CPU_SHARED_STORE.save),e("__CPU_SHARED_STORE_REMOVE",CPU_SHARED_STORE.remove),n.off=i=function(n){delete S[n]},n.broadcast=r=function(n){process.send(STRINGIFY(n))},o(),console.log(CONSOLE_GREEN("[UPPERCASE.JS-CPU_CLUSTERING] RUNNING WORKER... (ID:"+E+")"))})}}}),global.CPU_SHARED_STORE=CLASS(function(n){"use strict";var E,o,t,e,i={},r={};return n.save=E=function(n,E){var o=n.fullName,t=n.value,e=n.removeAfterSeconds;i[o]=t,void 0!==r[o]&&(r[o].remove(),delete r[o]),void 0!==e&&(r[o]=DELAY(e,E))},n.get=o=function(n){return i[n]},n.list=t=function(){return i},n.remove=e=function(n){delete i[n],void 0!==r[n]&&(r[n].remove(),delete r[n])},{init:function(E,o,t){var e,i,r,S,c;E.getFullName=e=function(n){return t+"."+n},o.save=i=function(E){var o=E.name,t=e(o),i=E.value,r=E.removeAfterSeconds;n.save({fullName:t,value:i,removeAfterSeconds:r},function(){c(o)}),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__CPU_SHARED_STORE_SAVE",data:{fullName:t,value:i}})},o.get=r=function(E){return n.get(e(E))},o.list=S=function(){var E={};return EACH(n.list(),function(n,o){o.substring(0,t.length+1)===t+"."&&(E[o.substring(t.length+1)]=n)}),E},o.remove=c=function(E){var o=e(E);n.remove(o),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__CPU_SHARED_STORE_REMOVE",data:o})}}}}),global.SERVER_CLUSTERING=METHOD(function(n){"use strict";return{run:function(E,o){var t,e,i,r,S=E.servers,c=E.thisServerName,s=E.port,a={},u={},R={},_=[];t=function(n){u[n]!==!0&&(u[n]=!0,CONNECT_TO_SOCKET_SERVER({host:S[n],port:s},{error:function(){delete u[n]},success:function(E,o,t){t({methodName:"__BOOTED",data:c}),R[n]=function(n){var E=n.methodName,o=n.data;t({methodName:"SERVER_CLUSTERING."+E,data:o})},E("__DISCONNECTED",function(){delete R[n],delete u[n]}),console.log("[UPPERCASE.JS-SERVER_CLUSTERING] CONNECTED CLUSTERING SERVER. (SERVER NAME:"+n+")"),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SERVER_CLUSTERING__CONNECT_TO_CLUSTERING_SERVER",data:n})}}))},void 0!==CPU_CLUSTERING.on&&CPU_CLUSTERING.on("__SERVER_CLUSTERING__CONNECT_TO_CLUSTERING_SERVER",t),EACH(S,function(n,E){E!==c&&t(E)}),SOCKET_SERVER(s,function(n,E){_.push(E),E("__BOOTED",function(n){t(n)}),EACH(a,function(n,o){EACH(n,function(n){E("SERVER_CLUSTERING."+o,n)})}),E("__DISCONNECTED",function(){REMOVE({array:_,value:E})})}),n.on=e=function(n,E){var o=a[n];void 0===o&&(o=a[n]=[]),o.push(E),EACH(_,function(o){o("SERVER_CLUSTERING."+n,E)})},e("__SHARED_STORE_SAVE",function(n){SHARED_STORE.save(n),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:n})}),e("__SHARED_STORE_REMOVE",function(n){SHARED_STORE.remove(n),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:n})}),n.off=i=function(n){delete a[n]},n.broadcast=r=function(n){EACH(R,function(E){E(n)})},void 0!==o&&o(),console.log(CONSOLE_BLUE("[UPPERCASE.JS-SERVER_CLUSTERING] RUNNING CLUSTERING SERVER... (THIS SERVER NAME:"+c+", PORT:"+s+")"))}}}),global.SHARED_STORE=CLASS(function(n){"use strict";var E,o,t,e,i={},r={};return n.save=E=function(n,E){var o=n.fullName,t=n.value,e=n.removeAfterSeconds;i[o]=t,void 0!==r[o]&&(r[o].remove(),delete r[o]),void 0!==e&&(r[o]=DELAY(e,E))},n.get=o=function(n){return i[n]},n.list=t=function(){return i},n.remove=e=function(n){delete i[n],void 0!==r[n]&&(r[n].remove(),delete r[n])},{init:function(E,o,t){var e,i,r,S,c;e=function(n){return t+"."+n},o.save=i=function(E){var o=E.name,t=e(o),i=E.value,r=E.removeAfterSeconds;n.save({fullName:t,value:i,removeAfterSeconds:r},function(){c(o)}),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:{fullName:t,value:i}}),void 0!==SERVER_CLUSTERING.broadcast&&SERVER_CLUSTERING.broadcast({methodName:"__SHARED_STORE_SAVE",data:{fullName:t,value:i}})},o.get=r=function(E){return n.get(e(E))},o.list=S=function(){var E={};return EACH(n.list(),function(n,o){o.substring(0,t.length+1)===t+"."&&(E[o.substring(t.length+1)]=n)}),E},o.remove=c=function(E){var o=e(E);n.remove(o),void 0!==CPU_CLUSTERING.broadcast&&CPU_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:o}),void 0!==SERVER_CLUSTERING.broadcast&&SERVER_CLUSTERING.broadcast({methodName:"__SHARED_STORE_REMOVE",data:o})}}}}),global.CONNECT_TO_SOCKET_SERVER=METHOD({run:function(n,E){"use strict";var o,t,e,i,r,S,c,s,a=n.host,u=n.port,R=require("net"),_={},C=0,d="";CHECK_IS_DATA(E)!==!0?o=E:(o=E.success,t=E.error),s=function(n,E,o){var t=_[n];void 0!==t&&EACH(t,function(n){n(E,function(n){void 0!==c&&void 0!==o&&c({methodName:"__CALLBACK_"+o,data:n})})})},e=R.connect({host:a,port:u},function(){i=!0,o(r=function(n,E){var o=_[n];void 0===o&&(o=_[n]=[]),o.push(E)},S=function(n,E){var o=_[n];void 0!==o&&(void 0!==E?REMOVE({array:o,value:E}):delete _[n])},c=function(n,E){var o="__CALLBACK_"+C;n.sendKey=C,C+=1,e.write(STRINGIFY(n)+"\r\n"),void 0!==E&&r(o,function(n){E(n),S(o)})},function(){e.end()})}),e.on("data",function(n){var E,o,t;for(d+=n.toString();-1!==(o=d.indexOf("\r\n"));)E=d.substring(0,o),t=PARSE_STR(E),void 0!==t&&s(t.methodName,t.data,t.sendKey),d=d.substring(o+1)}),e.on("close",function(){s("__DISCONNECTED")}),e.on("error",function(n){var E=n.toString();i!==!0?void 0!==t?t(E):console.log(CONSOLE_RED("[UPPERCASE.JS-CONNECT_TO_SOCKET_SERVER] CONNECT TO SOCKET SERVER FAILED: "+E)):s("__ERROR",E)})}}),global.CONSOLE_BLUE=METHOD({run:function(n){"use strict";return"[36m"+n+"[0m"}}),global.CONSOLE_GREEN=METHOD({run:function(n){"use strict";return"[32m"+n+"[0m"}}),global.CONSOLE_RED=METHOD({run:function(n){"use strict";return"[31m"+n+"[0m"}}),global.CONSOLE_YELLOW=METHOD({run:function(n){"use strict";return"[33m"+n+"[0m"}}),global.SHA1=METHOD({run:function(n){"use strict";var E=n.key,o=n.password,t=require("crypto");return t.createHmac("sha1",E).update(o).digest("hex")}}),global.CHECK_IS_EXISTS_FILE=METHOD(function(){"use strict";var n=require("fs");return{run:function(E,o){var t,e;return CHECK_IS_DATA(E)!==!0?t=E:(t=E.path,e=E.isSync),e===!0?n.existsSync(t):void n.exists(t,o)}}}),global.COPY_FILE=METHOD(function(){"use strict";var n=require("fs"),E=require("path");return{run:function(o,t){var e,i,r,S=o.from,c=o.to,s=o.isSync;void 0!==t&&(CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.notExists,r=t.error)),CREATE_FOLDER({path:E.dirname(c),isSync:s},{error:r,success:function(){s!==!0?CHECK_IS_EXISTS_FILE(S,function(E){var o;E===!0?(o=n.createReadStream(S),o.pipe(n.createWriteStream(c)),o.on("error",function(n){var E=n.toString();void 0!==r?r(E):console.log(CONSOLE_RED("[UPPERCASE.JS-COPY_FILE] ERROR:"+E))}),o.on("end",function(){void 0!==e&&e()})):void 0!==i?i(S):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-COPY_FILE] NOT EXISTS! <"+S+">"))}):RUN(function(){var E;try{if(CHECK_IS_EXISTS_FILE({path:S,isSync:!0})!==!0)return void(void 0!==i?i(S):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-COPY_FILE] NOT EXISTS! <"+S+">")));n.writeFileSync(c,n.readFileSync(S))}catch(o){o!==TO_DELETE&&(E=o.toString(),void 0!==r?r(E):console.log(CONSOLE_RED("[UPPERCASE.JS-COPY_FILE] ERROR: "+E)))}void 0!==e&&e()})}})}}}),global.CREATE_FOLDER=METHOD(function(){"use strict";var n=require("fs"),E=require("path");return{run:function(o,t){var e,i,r,S,c;CHECK_IS_DATA(o)!==!0?e=o:(e=o.path,i=o.isSync),void 0!==t&&(CHECK_IS_DATA(t)!==!0?S=t:(S=t.success,c=t.error)),i!==!0?CHECK_IS_EXISTS_FILE(e,function(o){o===!0?void 0!==S&&S():(r=E.dirname(e),CHECK_IS_EXISTS_FILE(r,function(E){E===!0?n.mkdir(e,function(n){var E;n!==TO_DELETE?(E=n.toString(),void 0!==c?c(E):console.log(CONSOLE_RED("[UPPERCASE.JS-CREATE_FOLDER] ERROR: "+E))):S()}):CREATE_FOLDER(r,function(){CREATE_FOLDER(e,S)})}))}):RUN(function(){var o;try{CHECK_IS_EXISTS_FILE({path:e,isSync:!0})!==!0&&(r=E.dirname(e),CHECK_IS_EXISTS_FILE({path:r,isSync:!0})===!0?n.mkdirSync(e):(CREATE_FOLDER({path:r,isSync:!0}),CREATE_FOLDER({path:e,isSync:!0})))}catch(t){t!==TO_DELETE&&(o=t.toString(),void 0!==c?c(o):console.log(CONSOLE_RED("[UPPERCASE.JS-CREATE_FOLDER] ERROR: "+o)))}void 0!==S&&S()})}}}),global.FIND_FILE_NAMES=METHOD(function(){"use strict";{var n=require("fs");require("path")}return{run:function(E,o){var t,e,i,r,S,c=[];return CHECK_IS_DATA(E)!==!0?t=E:(t=E.path,e=E.isSync),void 0!==o&&(CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notExists,S=o.error)),e===!0?RUN(function(){var E,o;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FILE_NAMES] NOT EXISTS! <"+t+">")));E=n.readdirSync(t),EACH(E,function(E){"."!==E[0]&&n.statSync(t+"/"+E).isDirectory()!==!0&&c.push(E)})}catch(e){e!==TO_DELETE&&(o=e.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR: "+o)))}return void 0!==i&&i(c),c}):void CHECK_IS_EXISTS_FILE(t,function(E){E===!0?n.readdir(t,function(E,o){var e;E!==TO_DELETE?(e=E.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR:"+e))):void 0!==i&&PARALLEL(o,[function(E,o){"."!==E[0]?n.stat(t+"/"+E,function(n,t){var e;n!==TO_DELETE?(e=n.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FILE_NAMES] ERROR:"+e))):(t.isDirectory()!==!0&&c.push(E),o())}):o()},function(){void 0!==i&&i(c)}])}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">"))})}}}),global.FIND_FOLDER_NAMES=METHOD(function(){"use strict";{var n=require("fs");require("path")}return{run:function(E,o){var t,e,i,r,S,c=[];return CHECK_IS_DATA(E)!==!0?t=E:(t=E.path,e=E.isSync),void 0!==o&&(CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notExists,S=o.error)),e===!0?RUN(function(){var E,o;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">")));E=n.readdirSync(t),EACH(E,function(E){"."!==E[0]&&n.statSync(t+"/"+E).isDirectory()===!0&&c.push(E)})}catch(e){e!==TO_DELETE&&(o=e.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR: "+o)))}return void 0!==i&&i(c),c}):void CHECK_IS_EXISTS_FILE(t,function(E){E===!0?n.readdir(t,function(E,o){var e;E!==TO_DELETE?(e=E.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR:"+e))):void 0!==i&&PARALLEL(o,[function(E,o){"."!==E[0]?n.stat(t+"/"+E,function(n,t){var e;n!==TO_DELETE?(e=n.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-FIND_FOLDER_NAMES] ERROR:"+e))):(t.isDirectory()===!0&&c.push(E),o())}):o()},function(){void 0!==i&&i(c)}])}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-FIND_FOLDER_NAMES] NOT EXISTS! <"+t+">"))})}}}),global.MOVE_FILE=METHOD({run:function(n,E){"use strict";var o,t,e,i=n.from,r=n.isSync;CHECK_IS_DATA(E)!==!0?o=E:(o=E.success,t=E.notExists,e=E.error),COPY_FILE(n,{error:e,notExists:t,success:function(){REMOVE_FILE({path:i,isSync:r},{error:e,notExists:t,success:o})}})}}),global.READ_FILE=METHOD(function(){"use strict";var n=require("fs");return{run:function(E,o){var t,e,i,r,S;return CHECK_IS_DATA(E)!==!0?t=E:(t=E.path,e=E.isSync),void 0!==o&&(CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notExists,S=o.error)),e===!0?RUN(function(){var E,o;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")));if(n.statSync(t).isDirectory()===!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")))}catch(e){e!==TO_DELETE&&(E=e.toString(),void 0!==S?S(E):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+E)))}return o=n.readFileSync(t),void 0!==i&&i(o),o}):void CHECK_IS_EXISTS_FILE(t,function(E){E===!0?n.stat(t,function(E,o){var e;E!==TO_DELETE?(e=E.toString(),void 0!==S?S(e):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+e))):o.isDirectory()===!0?void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">")):n.readFile(t,function(n,E){var o;n!==TO_DELETE?(o=n.toString(),void 0!==S?S(o):console.log(CONSOLE_RED("[UPPERCASE.JS-READ_FILE] ERROR: "+o))):void 0!==i&&i(E)})}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-READ_FILE] NOT EXISTS! <"+t+">"))})}}}),global.REMOVE_FILE=METHOD(function(){"use strict";var n=require("fs");return{run:function(E,o){var t,e,i,r,S;CHECK_IS_DATA(E)!==!0?t=E:(t=E.path,e=E.isSync),CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notExists,S=o.error),e!==!0?CHECK_IS_EXISTS_FILE(t,function(E){E===!0?n.unlink(t,function(n){var E;n!==TO_DELETE?(E=n.toString(),void 0!==S?S(E):console.log(CONSOLE_RED("[UPPERCASE.JS-REMOVE_FILE] ERROR: "+E))):void 0!==i&&i()}):void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-REMOVE_FILE] NOT EXISTS! <"+t+">"))}):RUN(function(){var E;try{if(CHECK_IS_EXISTS_FILE({path:t,isSync:!0})!==!0)return void(void 0!==r?r(t):console.log(CONSOLE_YELLOW("[UPPERCASE.JS-REMOVE_FILE] NOT EXISTS! <"+t+">")));n.unlinkSync(t)}catch(o){o!==TO_DELETE&&(E=o.toString(),void 0!==S?S(E):console.log(CONSOLE_RED("[UPPERCASE.JS-REMOVE_FILE] ERROR: "+E)))}void 0!==i&&i()})}}}),global.WRITE_FILE=METHOD(function(){"use strict";var n=require("fs"),E=require("path");return{run:function(o,t){var e,i,r=o.path,S=o.content,c=o.buffer,s=o.isSync;void 0!==t&&(CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.error)),CREATE_FOLDER({path:E.dirname(r),isSync:s},function(){s!==!0?n.writeFile(r,void 0!==c?c:S,function(n){var E;n!==TO_DELETE?(E=n.toString(),void 0!==i?i(E):console.log(CONSOLE_RED("[UPPERCASE.JS-WRITE_FILE] ERROR:"+E))):void 0!==e&&e()}):RUN(function(){var E;try{n.writeFileSync(r,void 0!==c?c:S)}catch(o){o!==TO_DELETE&&(E=o.toString(),void 0!==i?i(E):console.log(CONSOLE_RED("[UPPERCASE.JS-WRITE_FILE] ERROR: "+E)))}void 0!==e&&e()})})}}}),global.DELETE=METHOD({run:function(n,E){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(n)===!0?n:{uri:n},{method:"DELETE"}]),E)}}),global.GET=METHOD({run:function(n,E){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(n)===!0?n:{uri:n},{method:"GET"}]),E)}}),global.POST=METHOD({run:function(n,E){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(n)===!0?n:{uri:n},{method:"POST"}]),E)}}),global.PUT=METHOD({run:function(n,E){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(n)===!0?n:{uri:n},{method:"PUT"}]),E)}}),global.REQUEST=METHOD(function(){"use strict";var n=require("http"),E=require("https");return{run:function(o,t){var e,i,r,S=o.host,c=o.isSecure,s=void 0===o.port?c!==!0?80:443:o.port,a=o.method,u=o.uri,R=o.paramStr,_=o.data;a=a.toUpperCase(),void 0!==u&&-1!==u.indexOf("?")&&(R=u.substring(u.indexOf("?")+1)+(void 0===R?"":"&"+R),u=u.substring(0,u.indexOf("?"))),void 0!==_&&(R=(void 0===R?"":R+"&")+"data="+encodeURIComponent(STRINGIFY(_))),R=(void 0===R?"":R+"&")+Date.now(),CHECK_IS_DATA(t)!==!0?e=t:(e=t.success,i=t.error),"GET"===a?r=(c!==!0?n:E).get({hostname:S,port:s,path:"/"+(void 0===u?"":u)+"?"+R},function(n){var E="";n.setEncoding("utf-8"),n.on("data",function(n){E+=n}),n.on("end",function(){e(E,n.headers)})}):(r=(c!==!0?n:E).request({hostname:S,port:s,path:"/"+(void 0===u?"":u),method:a},function(n){var E="";n.setEncoding("utf-8"),n.on("data",function(n){E+=n}),n.on("end",function(){e(E,n.headers)})}),r.write(R),r.end()),r.on("error",function(n){var E=n.toString();void 0!==i?i(E):console.log(CONSOLE_RED("[UPPERCASE.JS-NODE] REQUEST FAILED: "+E),o)})}}}),global.RESOURCE_SERVER=CLASS(function(n){"use strict";var E,o=require("path"),t=require("querystring");return n.getContentTypeFromURI=E=function(n){var E=o.extname(n);return".png"===E?"image/png":".jpeg"===E||".jpg"===E?"image/jpeg":".gif"===E?"image/gif":".svg"===E?"image/svg+xml":".js"===E?"application/javascript":".json"===E?"application/json":".css"===E?"text/css":".text"===E||".txt"===E?"text/plain":".html"===E?"text/html":".swf"===E?"application/x-shockwave-flash":".mp3"===E?"audio/mpeg":"application/octet-stream"},{init:function(n,o,e,i){var r,S,c,s,a,u,R,_,C,d=(require("path"),{});CHECK_IS_DATA(e)!==!0?r=e:(r=e.port,S=e.securedPort,c=e.rootPath,s=e.version),void 0!==i&&(CHECK_IS_DATA(i)!==!0?a=i:(a=i.requestListener,u=i.error,R=i.notExistsResource)),_=WEB_SERVER(e,function(n,o,e){var i,r,S,_=c,C=n.uri,O=n.uri,v=n.method,T=n.params,f=n.headers,l={};NEXT([function(E){void 0!==a&&(i=a(n,o,e,function(n){_=n},function(n){void 0!==n&&(l=n),DELAY(E)}),O=n.uri,v=n.method,T=n.params,f=n.headers),i!==!1&&n.isResponsed!==!0&&E()},function(){return function(){CONFIG.isDevMode!==!0&&(l.isFinal!==!0?void 0!==s&&f["if-none-match"]===s:void 0!==f["if-none-match"])?o(EXTEND({origin:{statusCode:304},extend:l})):CONFIG.isDevMode!==!0&&l.isFinal!==!0&&void 0!==s&&""!==C&&T.version!==s?o(EXTEND({origin:{statusCode:302,headers:{Location:"/"+C+"?"+t.stringify(COMBINE([T,{version:s}]))}},extend:l})):void 0!==_&&"GET"===v?(r=function(E){void 0!==R&&(i=R(E,n,o)),i!==!1&&n.isResponsed!==!0&&o(EXTEND({origin:{statusCode:404},extend:l}))},S=function(E){void 0!==u?i=u(E,n,o):console.log(CONSOLE_RED("[UPPERCASE.JS-RESOURCE_SERVER] ERROR: "+E)),i!==!1&&n.isResponsed!==!0&&o(EXTEND({origin:{statusCode:500},extend:l}))},NEXT([function(n){var E=d[C];void 0!==E?n(E.buffer,E.contentType):READ_FILE(_+"/"+O,{notExists:function(){READ_FILE(_+(""===O?"":"/"+O)+"/index.html",{notExists:r,error:S,success:function(E){n(E,"text/html")}})},error:S,success:n})},function(){return function(n,t){void 0===t&&(t=E(O)),CONFIG.isDevMode!==!0&&l.isFinal!==!0&&void 0===d[C]&&(d[C]={buffer:n,contentType:t}),o(EXTEND({origin:{buffer:n,contentType:t,version:s},extend:l}))}}])):o(EXTEND({origin:{statusCode:404},extend:l}))}}])}),console.log("[UPPERCASE.JS-RESOURCE_SERVER] RUNNING RESOURCE SERVER..."+(void 0===r?"":" (PORT:"+r+")")+(void 0===S?"":" (SECURED PORT:"+S+")")),o.getNativeHTTPServer=C=function(){return _.getNativeHTTPServer()}}}}),global.SOCKET_SERVER=METHOD({run:function(n,E){"use strict";var o=require("net"),t=o.createServer(function(n){var o,t,e,i={},r=0,S="",c=function(n,E,o){var t;try{t=i[n],void 0!==t&&EACH(t,function(n){n(E,function(n){void 0!==o&&e({methodName:"__CALLBACK_"+o,data:n})})})}catch(r){console.log(CONSOLE_RED("[UPPERCASE.JS-SOCEKT_SERVER] ERROR:"),r.toString())}};n.on("data",function(n){var E,o,t;for(S+=n.toString();-1!==(o=S.indexOf("\r\n"));)E=S.substring(0,o),t=PARSE_STR(E),void 0!==t&&c(t.methodName,t.data,t.sendKey),S=S.substring(o+1)}),n.on("close",function(){c("__DISCONNECTED"),i=void 0}),n.on("error",function(n){var E=n.toString();console.log(CONSOLE_RED("[UPPERCASE.JS-SOCEKT_SERVER] ERROR:"),E),c("__ERROR",E)}),E({ip:n.remoteAddress},o=function(n,E){var o=i[n];void 0===o&&(o=i[n]=[]),o.push(E)},t=function(n,E){var o=i[n];void 0!==o&&(void 0!==E?REMOVE({array:o,value:E}):delete i[n])},e=function(E,e){var i="__CALLBACK_"+r;E.sendKey=r,r+=1,n.write(STRINGIFY(E)+"\r\n"),void 0!==e&&o(i,function(n){e(n),t(i)})},function(){n.end()})});t.listen(n),console.log("[UPPERCASE.JS-SOCKET_SERVER] RUNNING SOCKET SERVER... (PORT:"+n+")")}}),global.UDP_SERVER=METHOD({run:function(n,E){"use strict";var o,t,e=require("dgram"),i=4;CHECK_IS_DATA(n)!==!0?o=n:(o=n.port,i=n.ipVersion),t=e.createSocket("udp"+i),t.on("message",function(n,o){var e=o.address,i=o.port;E({ip:e,port:i,content:n.toString()},function(n){var E=new Buffer(n);t.send(E,0,E.length,i,e)})}),t.on("listening",function(){console.log("[UPPERCASE.JS-UDP_SERVER] RUNNING UDP SERVER... (PORT:"+o+")")}),t.bind(o)}}),global.WEB_SERVER=CLASS(function(n){"use strict";var E,o=require("http"),t=require("querystring"),e=require("zlib");return n.getEncodingFromContentType=E=function(n){return"application/javascript"===n?"utf-8":"application/json"===n?"utf-8":"text/css"===n?"utf-8":"text/plain"===n?"utf-8":"text/html"===n?"utf-8":"image/png"===n?"binary":"image/jpeg"===n?"binary":"image/gif"===n?"binary":"image/svg+xml"===n?"utf-8":"application/x-shockwave-flash"===n?"binary":"audio/mpeg"===n?"binary":"binary"},{init:function(n,i,r,S){var c,s,a,u,R,_,C,d;CHECK_IS_DATA(r)!==!0?c=r:(c=r.port,s=r.securedPort,a=r.securedKeyFilePath,u=r.securedCertFilePath,R=r.noParsingParamsURI),C=function(n,o){var i,r,c=n.headers,s=n.url,a=n.method.toUpperCase(),u=c["x-forwarded-for"],_=c["accept-encoding"],C=[];void 0===u&&(u=n.connection.remoteAddress),void 0===_&&(_=""),-1!=s.indexOf("?")&&(i=s.substring(s.indexOf("?")+1),s=s.substring(0,s.indexOf("?"))),s=s.substring(1),NEXT([function(E){"GET"===a||R===s||CHECK_IS_IN({array:R,value:s})===!0?E():(n.on("data",function(n){void 0===i&&(i=""),i+=n}),n.on("end",function(){E()}))},function(){return function(){S(r={headers:c,uri:s,method:a,params:t.parse(i),ip:u,cookies:PARSE_COOKIE_STR(c.cookie),nativeReq:n},function(n){var t,i,S,c,s,a,u,R;r.isResponsed!==!0&&(CHECK_IS_DATA(n)!==!0?c=n:(t=n.statusCode,i=n.headers,S=n.contentType,c=n.content,s=n.buffer,a=n.encoding,u=n.version,R=n.isFinal),void 0===t&&(t=200),void 0===i&&(i={}),void 0!==S&&(void 0===a&&(a=E(S)),i["Content-Type"]=S+"; charset="+a),CONFIG.isDevMode!==!0&&(R===!0?i.ETag="FINAL":void 0!==u&&(i.ETag=u)),_.match(/\bgzip\b/)!==TO_DELETE?(i["Content-Encoding"]="gzip",e.gzip(void 0!==s?s:String(c),function(n,E){o.writeHead(t,i),o.end(E,a)})):(o.writeHead(t,i),o.end(void 0!==s?s:String(c),a)),r.isResponsed=!0)},function(n){C.push(n)})}}]),R!==s&&CHECK_IS_IN({array:R,value:s})!==!0&&n.on("close",function(){EACH(C,function(n){n()})})},void 0!==c&&(_=o.createServer(C).listen(c)),void 0!==s&&(_=https.createServer({key:fs.readFileSync(a),cert:fs.readFileSync(u)},C).listen(s)),console.log("[UPPERCASE.JS-WEB_SERVER] RUNNING WEB SERVER..."+(void 0===c?"":" (PORT:"+c+")")+(void 0===s?"":" (SECURED PORT:"+s+")")),i.getNativeHTTPServer=d=function(){return _}}}}),global.PARSE_COOKIE_STR=PARSE_COOKIE_STR=METHOD({run:function(n){"use strict";var E,o={};return void 0!==n&&(E=n.split(";"),EACH(E,function(n){var E=n.split("=");o[E[0].trim()]=decodeURIComponent(E[1])})),o}}),global.CREATE_COOKIE_STR_ARRAY=CREATE_COOKIE_STR_ARRAY=METHOD({run:function(n){"use strict";var E=[];return EACH(n,function(n,o){E.push(o+"="+encodeURIComponent(n))}),E}});